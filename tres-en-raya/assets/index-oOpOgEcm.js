var A=Object.defineProperty;var D=(r,i,t)=>i in r?A(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t;var B=(r,i,t)=>(D(r,typeof i!="symbol"?i+"":i,t),t),S=(r,i,t)=>{if(!i.has(r))throw TypeError("Cannot "+t)};var n=(r,i,t)=>(S(r,i,"read from private field"),t?t.call(r):i.get(r)),p=(r,i,t)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,t)},d=(r,i,t,o)=>(S(r,i,"write to private field"),o?o.call(r,t):i.set(r,t),t);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&o(e)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var W={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(r){(function(i,t){r.exports?r.exports=t():i.Toastify=t()})(q,function(i){var t=function(e){return new t.lib.init(e)},o="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:o,constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=e.duration===0?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity=e.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=e.stopOnFocus===void 0?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=e.escapeMarkup!==void 0?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var u in this.options.style)e.style[u]=this.options.style[u];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,this.options.avatar!==""){var b=document.createElement("img");b.src=this.options.avatar,b.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?e.appendChild(b):e.insertAdjacentElement("afterbegin",b)}if(this.options.close===!0){var h=document.createElement("button");h.type="button",h.setAttribute("aria-label","Close"),h.className="toast-close",h.innerHTML="&#10006;",h.addEventListener("click",(function(E){E.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var c=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&c>360?e.insertAdjacentElement("afterbegin",h):e.appendChild(h)}if(this.options.stopOnFocus&&this.options.duration>0){var g=this;e.addEventListener("mouseover",function(E){window.clearTimeout(e.timeOutValue)}),e.addEventListener("mouseleave",function(){e.timeOutValue=window.setTimeout(function(){g.removeElement(e)},g.options.duration)})}if(typeof this.options.destination<"u"&&e.addEventListener("click",(function(E){E.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&e.addEventListener("click",(function(E){E.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var w=s("x",this.options),C=s("y",this.options),I=this.options.position=="left"?w:"-"+w,j=this.options.gravity=="toastify-top"?C:"-"+C;e.style.transform="translate("+I+","+j+")"}return e},showToast:function(){this.toastElement=this.buildToast();var e;if(typeof this.options.selector=="string"?e=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?e=this.options.selector:e=document.body,!e)throw"Root element is not defined";var u=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,u),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var e={top:15,bottom:15},u={top:15,bottom:15},b={top:15,bottom:15},h=document.getElementsByClassName("toastify"),c,g=0;g<h.length;g++){a(h[g],"toastify-top")===!0?c="toastify-top":c="toastify-bottom";var w=h[g].offsetHeight;c=c.substr(9,c.length-1);var C=15,I=window.innerWidth>0?window.innerWidth:screen.width;I<=360?(h[g].style[c]=b[c]+"px",b[c]+=w+C):a(h[g],"toastify-left")===!0?(h[g].style[c]=e[c]+"px",e[c]+=w+C):(h[g].style[c]=u[c]+"px",u[c]+=w+C)}return this};function s(e,u){return u.offset[e]?isNaN(u.offset[e])?u.offset[e]:u.offset[e]+"px":"0px"}function a(e,u){return!e||typeof u!="string"?!1:!!(e.className&&e.className.trim().split(/\s+/gi).indexOf(u)>-1)}return t.lib.init.prototype=t.lib,t})})(W);var V=W.exports;const M=$(V);var N,F;class X{constructor(i="marcador"){p(this,N,void 0);p(this,F,[{name:"X",puntos:0},{name:"O",puntos:0}]);d(this,N,i),this.imprimir()}addPuntos(i){let t=n(this,F).find(o=>o.name===i);t.puntos++,this.imprimir()}imprimir(){let i=document.getElementById(n(this,N)),t=document.createElement("ul");n(this,F).forEach(o=>{let s=document.createElement("li");s.textContent=`Jugador ${o.name} tiene ${o.puntos} puntos`,t.append(s)}),i.innerHTML="",i.append(t)}}N=new WeakMap,F=new WeakMap;var m,l,x,f,T,R,k,y,O;class z{constructor(i=3,t=1,o=!1){p(this,m,void 0);p(this,l,void 0);p(this,x,void 0);p(this,f,void 0);p(this,T,void 0);p(this,R,void 0);p(this,k,void 0);p(this,y,!1);p(this,O,void 0);B(this,"movimientos",[]);d(this,m,new Array),d(this,l,i),d(this,x,t),d(this,k,o);for(let s=0;s<n(this,l);s++){n(this,m)[s]=new Array;for(let a=0;a<n(this,l);a++)n(this,m)[s][a]=null}d(this,f,"X"),d(this,R,new X),d(this,O,document.getElementById("movimientos"))}imprimir(i="tablero"){let t=document.getElementById(i);d(this,T,i),t.innerHTML="";for(let o=0;o<n(this,l);o++)for(let s=0;s<n(this,l);s++){let a=document.createElement("div");a.dataset.fila=o,a.dataset.columna=s,a.dataset.libre="",n(this,m)[o][s]&&(a.textContent=n(this,m)[o][s],a.dataset.libre=n(this,m)[o][s]),t.appendChild(a),this.addEventClick(a)}t.style.gridTemplateColumns=`repeat(${n(this,l)}, 1fr)`}isFree(i,t){return n(this,m)[i][t]===null}setCasilla(i,t,o){return this.isFree(i,t)?(n(this,m)[i][t]=o,!0):!1}getCasilla(i,t){return n(this,m)[i][t]}toogleTurno(){if(n(this,y))return!1;if(n(this,f)==="X"){if(d(this,f,"O"),n(this,k)){let i=this.getCasillaFreeRandom();if(this.setCasilla(i.i,i.j,"O"),this.imprimir(),this.comprobarResultados(),n(this,y))return!1;this.toogleTurno()}}else d(this,f,"X")}comprobarResultados(){if(n(this,y))return;let i=!1;for(let o=0;o<n(this,l)&&!i;o++){let s=0;for(let a=0;a<n(this,l);a++)a!==0&&this.getCasilla(o,a)===this.getCasilla(o,a-1)&&this.getCasilla(o,a)!==null&&s++;if(s===n(this,l)-1){console.log("Linea"),i=!0;break}}for(let o=0;o<n(this,l)&&!i;o++){let s=0;for(let a=0;a<n(this,l);a++)a!==0&&this.getCasilla(a,o)===this.getCasilla(a-1,o)&&this.getCasilla(a,o)!==null&&s++;if(s===n(this,l)-1){console.log("Columna"),i=!0;break}}let t=0;for(let o=0;o<n(this,l);o++)o!==0&&this.getCasilla(o,o)===this.getCasilla(o-1,o-1)&&this.getCasilla(o,o)!==null&&t++;t===n(this,l)-1&&(console.log("Diagonal de izquierda a derecha"),i=!0),t=0;for(let o=0;o<n(this,l);o++)if(o!==0){let s=n(this,l)-1-o;this.getCasilla(o,s)===this.getCasilla(o-1,s+1)&&this.getCasilla(o,s)!==null&&t++}t===n(this,l)-1&&(console.log("Diagonal de derecha a izquierda"),i=!0),i?(d(this,y,!0),M({text:`Ha ganado el jugador ${n(this,f)}`,newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelectorAll('div[data-libre=""]').forEach(s=>{s.dataset.libre="-"}),n(this,R).addPuntos(n(this,f)),document.querySelector(".clearGame").classList.toggle("show")):this.isFull()&&(M({text:"Han sido tablas",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelector(".clearGame").classList.toggle("show"),d(this,y,!0))}isFull(){return!n(this,m).some(i=>i.some(t=>t===null))}addEventClick(i){i.addEventListener("click",t=>{let o=t.currentTarget;o.dataset.libre===""&&(o.textContent=n(this,f),this.setCasilla(o.dataset.fila,o.dataset.columna,n(this,f)),o.dataset.libre=n(this,f),this.comprobarResultados(),this.toogleTurno(),this.registrarMovimiento(o.dataset.fila,o.dataset.columna))}),i.addEventListener("mouseover",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent=n(this,f))}),i.addEventListener("mouseleave",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent="")})}get dimension(){return n(this,l)}get elementID(){return n(this,T)}limpiar(){d(this,m,n(this,m).map(i=>i.map(t=>null))),d(this,y,!1),this.imprimir(),document.querySelector(".clearGameButton").classList.remove("hidden"),this.borrarMovimientos()}getCasillaFreeRandom(){let i,t;do i=Math.floor(Math.random()*n(this,l)),t=Math.floor(Math.random()*n(this,l));while(!this.isFree(i,t));return{i,j:t}}playRounds(){const i=document.getElementById("currentRound"),t=document.getElementById("totalRounds");let o=1;const s=n(this,x),a=()=>{i.textContent=o,t.textContent=s,this.limpiar(),d(this,y,!1),d(this,f,"X"),!n(this,k)||n(this,f)==="X"?this.waitForPlayerMove(()=>{this.toogleTurno(),this.comprobarResultados(),this.registrarMovimiento(),o>=s&&this.mostrarToastFinRondas()}):(this.toogleTurno(),this.comprobarResultados(),o>=s&&this.mostrarToastFinRondas())};a();const e=document.getElementById("nextRoundButton");e.onclick=()=>{o<s?(o++,a()):this.mostrarToastFinRondas()};const u=document.getElementById("resetGame");u.onclick=()=>{this.borrarMovimientos()}}registrarMovimiento(i,t,o){o=n(this,f),o==="O"?o="X":o="O",this.movimientos.push(`El jugador ${o} , ha hecho el siguiente movimiento: (${i}, ${t})`),n(this,O).innerHTML=this.movimientos.map(s=>`<div>${s}</div>`).join("")}borrarMovimientos(){this.movimientos=[],n(this,O).innerHTML=""}waitForPlayerMove(i){const t=document.getElementById(n(this,T)),o=s=>{s.target.dataset.libre===""&&(t.removeEventListener("click",o),i())};t.addEventListener("click",o)}mostrarToastFinRondas(){M({text:"Se han completado todas las rondas.",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast()}}m=new WeakMap,l=new WeakMap,x=new WeakMap,f=new WeakMap,T=new WeakMap,R=new WeakMap,k=new WeakMap,y=new WeakMap,O=new WeakMap;const _=document.getElementById("createTable"),v=document.getElementById("dimension"),P=document.getElementById("rounds"),J=document.getElementById("resetGame"),K=document.querySelectorAll(".clearGameButton"),G=document.querySelector(".preGame"),H=document.querySelector(".inGame");let L;_.addEventListener("click",r=>{if(!v.value||!P.value)return M({text:"Debe indicar una dimensión válida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),v.classList.add("error"),v.focus(),!1;if(isNaN(v.value))return M({text:"Debe introducir un número válido",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),v.classList.add("error"),v.focus(),!1;let i=document.getElementById("machine");L=new z(parseInt(v.value),parseInt(P.value),i.checked),L.imprimir("tablero"),G.classList.toggle("hide"),H.classList.toggle("hide"),console.log("Iniciando rondas de juego..."),L.playRounds()});v.addEventListener("keydown",()=>{v.classList.remove("error")});for(let r of K)r.addEventListener("click",()=>{L.limpiar()});J.addEventListener("click",r=>{document.getElementById(L.elementID).innerHTML="",document.getElementById("marcador").innerHTML="",L=null,G.classList.toggle("hide"),H.classList.toggle("hide"),v.value="",v.focus()});
